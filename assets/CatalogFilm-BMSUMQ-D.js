import{r as t,j as e,c as p,R as N,s as R,a as S}from"./index-CxYZ9VQR.js";const k="https://Rust-Hack.github.io/Movies/assets/noSearchFilm-CtDGFY9W.svg",w="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.9999%2020.7084L6.79926%2024.4942L8.17476%2016.4757L2.34143%2010.7975L10.3914%209.63086L13.9918%202.33569L17.5921%209.63086L25.6421%2010.7975L19.8088%2016.4757L21.1843%2024.4942L13.9999%2020.7084Z'%20fill='%23D5D6DC'%20stroke='%23D5D6DC'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",b=({onSaveRating:r})=>{const[a,g]=t.useState(0),[c,l]=t.useState(!1),[n,m]=t.useState(0),o=()=>{l(!0)},d=()=>{l(!1)},x=()=>{m(a),l(!1),r(a)},j=()=>n===0?e.jsx("p",{style:{color:"white"},children:n}):e.jsx("p",{className:"styleRating",children:n}),f=()=>n===0?e.jsx("img",{src:w,alt:"Rate"}):e.jsx("img",{src:R,alt:"Rate"});return e.jsxs("div",{children:[e.jsxs("div",{onClick:o,className:"starIcon",children:[f(),j()]}),c&&e.jsx("div",{className:"ratingWindow",children:e.jsxs("div",{className:"ratingWindowBlock",children:[e.jsxs("div",{className:"blockRatingWindowTitle",children:[e.jsx("h1",{className:"ratingWindowTitle",children:"Your rating"}),e.jsx("img",{src:p,alt:"Close",onClick:d})]}),e.jsxs("div",{className:"blockRatingWindowStar",children:[e.jsx("h1",{className:"blockRatingWindowStarTitle",children:"Coco"}),e.jsx(N,{color:"rgb(152, 84, 246)",size:"xl",count:10,style:{width:"100%",display:"flex",justifyContent:"space-between"},value:a,onChange:g}),e.jsx("button",{className:"blockRatingWindowStarButton",onClick:x,children:"Save"})]})]})})]})},F=({selectedGenre:r,selectedYear:a,onSaveRating:g})=>{const[c,l]=t.useState([]),[n,m]=t.useState([]),[o,d]=t.useState([]);t.useEffect(()=>{x(),j()},[]),t.useEffect(()=>{f()},[r,a,c]);const x=()=>{fetch("https://api.themoviedb.org/3/discover/movie?api_key=ffcdeae851e10aa8f18567123ef81640").then(s=>s.json()).then(s=>{l(s.results),d(s.results)}).catch(s=>console.error(s))},j=()=>{fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=ffcdeae851e10aa8f18567123ef81640").then(s=>s.json()).then(s=>m(s.genres)).catch(s=>console.error(s))},f=()=>{let s=c;r&&(s=s.filter(i=>i.genre_ids.includes(parseInt(r)))),a&&(s=s.filter(i=>i.release_date.slice(0,4)===a)),d(s)},u=s=>s.map(i=>{const h=n.find(v=>v.id===i);return h?h.name:""});return e.jsx("div",{className:"flexBlockMovieCard",children:o.length>0?o.map((s,i)=>e.jsxs("div",{className:"blockMovieCard",children:[e.jsx("div",{children:e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${s.poster_path}`,width:"119px",alt:`${s.original_title} Poster`})}),e.jsx("div",{className:"informAboutFilm",children:e.jsxs("div",{className:"cardInformation",children:[e.jsxs("div",{className:"titleRatingYear",children:[e.jsx("h1",{className:"nameFilm",children:s.original_title}),e.jsx("p",{className:"dateFont",children:s.release_date.slice(0,4)}),e.jsxs("div",{className:"blockRatingFilm",children:[e.jsx("img",{src:S,alt:"Star Icon"}),e.jsx("p",{children:s.vote_average}),e.jsx("p",{children:`(${s.vote_count})`})]})]}),e.jsxs("div",{className:"blockGenres",children:[e.jsx("p",{className:"titleGenres",children:"Genres"}),e.jsx("p",{className:"genresName",children:u(s.genre_ids).join(", ")})]})]})}),e.jsx(b,{onSaveRating:h=>g(s.id,h)})]},i)):e.jsx("img",{src:k,className:"noSearchFilm",alt:"No Search Results"})})};export{F as default};
